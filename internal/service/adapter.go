package service

import "context"

// ExchangeAdapter описывает минимальный набор функций,
// который должен реализовать адаптер конкретной биржи,
// чтобы сканер мог получать рыночные данные и рассчитывать спреды.
//
// Все методы обязаны быть потокобезопасными и уважать контекст.
// Ошибки возвращаются вызывающему для дальнейшей обработки.
type ExchangeAdapter interface {
	// Name возвращает короткое идентификатор биржи в snake_case,
	// используемый в логах и метриках.
	Name() string

	// OrderBookTop запрашивает лучшую цену покупки (bid) и продажи (ask)
	// по указанной торговой паре.
	//
	// Значения возвращаются в котируемой валюте (quote).
	OrderBookTop(ctx context.Context, pair string) (bestBid, bestAsk float64, err error)

	// TradingFee возвращает комиссию мейкера и тейкера для пары.
	// Значения указаны как доли (0.001 == 0.1 %).
	TradingFee(pair string) (maker, taker float64)

	// Close освобождает ресурсы (например, закрывает WebSocket-соединения).
	// Должен быть идемпотентным.
	Close() error
}
